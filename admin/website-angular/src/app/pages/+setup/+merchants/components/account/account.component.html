<nb-card class="setup-merchant-account">
	<nb-card-header>Account</nb-card-header>
	<nb-card-body>
		<form class="row m-0" #accountForm="ngForm">
			<div class="form-group col-md-6">
				<label for="email">Email address</label>
				<input
					nbInput
					type="email"
					class="form-control"
					id="email"
					name="email-input"
					placeholder="Email"
					[(ngModel)]="accountModel.email"
					(change)="emailChange()"
					#email="ngModel"
					[ngClass]="{
						'input-danger':
							email.invalid && (email.dirty || email.touched),
						'input-success':
							email.valid && (email.dirty || email.touched)
					}"
					required
					email
				/>
				<small
					class="text-danger"
					*ngIf="email.invalid && (email.dirty || email.touched)"
				>
					<span *ngIf="email.errors.required">Email is required</span>
					<span *ngIf="email.errors.email">Invalid email format</span>
				</small>
			</div>
			<div class="form-group col-md-6">
				<label for="username">Username</label>
				<input
					nbInput
					type="text"
					class="form-control"
					id="username"
					name="username-input"
					placeholder="Username"
					[(ngModel)]="accountModel.username"
					#username="ngModel"
					[ngClass]="{
						'input-danger':
							username.invalid &&
							(username.dirty ||
								username.touched ||
								accountModel.username !== ''),
						'input-success':
							username.valid &&
							(username.dirty ||
								username.touched ||
								accountModel.username !== '')
					}"
					required
					minlength="3"
				/>
				<small
					class="text-danger"
					*ngIf="
						username.invalid && (username.dirty || username.touched)
					"
				>
					<span *ngIf="username.errors.required"
						>Username is required</span
					>
					<span *ngIf="username.errors.minlength"
						>Username must be at least 3 characters</span
					>
				</small>
			</div>
			<div class="form-group col-md-6">
				<label for="pass">Password</label>
				<input
					nbInput
					type="password"
					class="form-control"
					id="pass"
					name="pass-input"
					[(ngModel)]="accountModel.password"
					#password="ngModel"
					placeholder="Password"
					[ngClass]="{
						'input-danger':
							password.invalid &&
							(password.dirty || password.touched),
						'input-success':
							password.valid &&
							(password.dirty || password.touched)
					}"
					minlength="4"
					required
				/>
				<small
					class="text-danger"
					*ngIf="
						password.invalid && (password.dirty || password.touched)
					"
				>
					<span *ngIf="password.errors.required"
						>Password is required</span
					>
					<span *ngIf="password.errors.minlength"
						>Password must be at least 4 characters</span
					>
				</small>
			</div>
			<div class="form-group col-md-6">
				<label for="r-pass">Repeat password</label>
				<input
					nbInput
					type="password"
					class="form-control"
					id="rPass"
					name="r-pass-input"
					[(ngModel)]="accountModel.repeatPassword"
					#rPassword="ngModel"
					placeholder="Repeat password"
					[ngClass]="{
						'input-danger':
							(rPassword.invalid ||
								rPassword.value !== password.value ||
								password.invalid) &&
							(rPassword.dirty || rPassword.touched),
						'input-success':
							rPassword.value === password.value &&
							password.valid &&
							(rPassword.dirty || rPassword.touched)
					}"
					required
				/>
				<small
					class="text-danger"
					*ngIf="
						(rPassword.invalid ||
							rPassword.value !== password.value) &&
						(rPassword.dirty || rPassword.touched)
					"
				>
					<span *ngIf="rPassword.errors?.required"
						>Repeat password is required</span
					>
					<span
						*ngIf="
							!rPassword.errors?.required &&
							rPassword.value !== password.value
						"
						>Passwords do not match</span
					>
				</small>
			</div>
		</form>
	</nb-card-body>
</nb-card>
